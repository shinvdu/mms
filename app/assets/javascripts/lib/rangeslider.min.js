!function(){function e(e){function i(e){var t=o.rangeslider;for(var i in t.components)t.components[i].init_();t.options.hidden&&t.hide(),t.options.locked&&t.lock(),0==t.options.panel&&t.hidePanel(),0==t.options.controlTime&&t.hidecontrolTime(),t._reset(),o.trigger("loadedRangeSlider")}var o=this;o.rangeslider=new t(o,e),"Youtube"==o.techName?(o.one("error",function(e){switch(o.error){case 2:alert("The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");case 5:alert("The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.");case 100:alert("The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.");break;case 101:alert("The owner of the requested video does not allow it to be played in embedded players.");break;case 150:alert("The owner of the requested video does not allow it to be played in embedded players.");break;default:alert("Unknown Error")}}),o.on("firstplay",i)):o.one("playing",i),console.log("Loaded Plugin RangeSlider")}function t(e,t){var e=e||this;this.player=e,this.components={},t=t||{},t.hasOwnProperty("locked")||(t.locked=!1),t.hasOwnProperty("hidden")||(t.hidden=!0),t.hasOwnProperty("panel")||(t.panel=!0),t.hasOwnProperty("controlTime")||(t.controlTime=!0),this.options=t,this.init()}videojs.plugin("rangeslider",e),t.prototype={init:function(){var e=this.player||{};this.updatePrecision=3,this.start=0,this.end=0;var t=e.controlBar,i=t.progressControl.seekBar;this.components.RSTimeBar=i.RSTimeBar,this.components.ControlTimePanel=t.ControlTimePanel,this.rstb=this.components.RSTimeBar,this.box=this.components.SeekRSBar=this.rstb.SeekRSBar,this.bar=this.components.SelectionBar=this.box.SelectionBar,this.left=this.components.SelectionBarLeft=this.box.SelectionBarLeft,this.right=this.components.SelectionBarRight=this.box.SelectionBarRight,this.tp=this.components.TimePanel=this.box.TimePanel,this.tpl=this.components.TimePanelLeft=this.tp.TimePanelLeft,this.tpr=this.components.TimePanelRight=this.tp.TimePanelRight,this.ctp=this.components.ControlTimePanel,this.ctpl=this.components.ControlTimePanelLeft=this.ctp.ControlTimePanelLeft,this.ctpr=this.components.ControlTimePanelRight=this.ctp.ControlTimePanelRight},lock:function(){this.options.locked=!0,this.ctp.enable(!1),"undefined"!=typeof this.box&&videojs.addClass(this.box.el_,"locked")},unlock:function(){this.options.locked=!1,this.ctp.enable(),"undefined"!=typeof this.box&&videojs.removeClass(this.box.el_,"locked")},show:function(){this.options.hidden=!1,"undefined"!=typeof this.rstb&&(this.rstb.show(),this.options.controlTime&&this.showcontrolTime())},hide:function(){this.options.hidden=!0,"undefined"!=typeof this.rstb&&(this.rstb.hide(),this.ctp.hide())},showPanel:function(){this.options.panel=!0,"undefined"!=typeof this.tp&&videojs.removeClass(this.tp.el_,"disable")},hidePanel:function(){this.options.panel=!1,"undefined"!=typeof this.tp&&videojs.addClass(this.tp.el_,"disable")},showcontrolTime:function(){this.options.controlTime=!0,"undefined"!=typeof this.ctp&&this.ctp.show()},hidecontrolTime:function(){this.options.controlTime=!1,"undefined"!=typeof this.ctp&&this.ctp.hide()},setValue:function(e,t,i){var i="undefined"!=typeof i?i:!0,o=this._percent(t),s=0===e||1===e,n=!this.locked;n&&s&&this.box.setPosition(e,o,i)},setValues:function(e,t,i){var i="undefined"!=typeof i?i:!0;this._reset(),this._setValuesLocked(e,t,i)},getValues:function(){var e,t;return e=this.start||this._getArrowValue(0),t=this.end||this._getArrowValue(1),{start:e,end:t}},playBetween:function(e,t,i){i="undefined"==typeof i?!0:i,this.player.currentTime(e),this.player.play(),i?(this.show(),this._reset()):this.hide(),this._setValuesLocked(e,t),this.bar.activatePlay(e,t)},loop:function(e,t,i){var o=this.player;o&&(o.on("pause",videojs.bind(this,function(){this.looping=!1})),i="undefined"==typeof i?!0:i,i?(this.show(),this._reset()):this.hide(),this._setValuesLocked(e,t),this.timeStart=e,this.timeEnd=t,this.looping=!0,this.player.currentTime(e),this.player.play(),this.player.on("timeupdate",videojs.bind(this,this.bar.process_loop)))},_getArrowValue:function(e){var e=e||0,t=this.player.duration();t="undefined"==typeof t?0:t;var i=this[0===e?"left":"right"].el_.style.left.replace("%","");return""==i&&(i=0===e?0:100),videojs.round(this._seconds(i/100),this.updatePrecision-1)},_percent:function(e){var t=this.player.duration();return isNaN(t)?0:Math.min(1,Math.max(0,e/t))},_seconds:function(e){var t=this.player.duration();return isNaN(t)?0:Math.min(t,Math.max(0,e*t))},_reset:function(){var e=this.player.duration();this.tpl.el_.style.left="0%",this.tpr.el_.style.left="100%",this._setValuesLocked(0,e)},_setValuesLocked:function(e,t,i){var o="undefined"!=typeof i,i="undefined"!=typeof i?i:!0;this.options.locked?(this.unlock(),this.setValue(0,e,i),this.setValue(1,t,i),this.lock()):(this.setValue(0,e,i),this.setValue(1,t,i)),o&&this._triggerSliderChange()},_checkControlTime:function(e,t,i){var o,s,n,r=t[0],l=t[1],a=t[2],d=r.value,h=l.value,p=a.value;if(e=e||0,d!=i[0])o=r,s=d,n=i[0];else if(h!=i[1])o=l,s=h,n=i[1];else{if(p==i[2])return!1;o=a,s=p,n=i[2]}var c,u=this.player.duration()||0,v=/^\d+$/;if((!v.test(s)||s>60)&&(s=""==s?"":n),d=""==d?0:d,h=""==h?0:h,p=""==p?0:p,c=videojs.TextTrack.prototype.parseCueTime(d+":"+h+":"+p),c>u?(o.value=n,o.style.border="1px solid red"):(o.value=s,r.style.border=l.style.border=a.style.border="1px solid transparent",this.setValue(e,c,!1),this._triggerSliderChange()),1===e){var f=this.ctpl.el_.children,m=videojs.TextTrack.prototype.parseCueTime(f[0].value+":"+f[1].value+":"+f[2].value);m>c&&(o.style.border="1px solid red")}else{var y=this.ctpr.el_.children,j=videojs.TextTrack.prototype.parseCueTime(y[0].value+":"+y[1].value+":"+y[2].value);c>j&&(o.style.border="1px solid red")}},_triggerSliderChange:function(){this.player.trigger("sliderchange")}},videojs.Player.prototype.lockSlider=function(){return this.rangeslider.lock()},videojs.Player.prototype.unlockSlider=function(){return this.rangeslider.unlock()},videojs.Player.prototype.showSlider=function(){return this.rangeslider.show()},videojs.Player.prototype.hideSlider=function(){return this.rangeslider.hide()},videojs.Player.prototype.showSliderPanel=function(){return this.rangeslider.showPanel()},videojs.Player.prototype.hideSliderPanel=function(){return this.rangeslider.hidePanel()},videojs.Player.prototype.showControlTime=function(){return this.rangeslider.showcontrolTime()},videojs.Player.prototype.hideControlTime=function(){return this.rangeslider.hidecontrolTime()},videojs.Player.prototype.setValueSlider=function(e,t){return this.rangeslider.setValues(e,t)},videojs.Player.prototype.playBetween=function(e,t){return this.rangeslider.playBetween(e,t)},videojs.Player.prototype.loopBetween=function(e,t){return this.rangeslider.loop(e,t)},videojs.Player.prototype.getValueSlider=function(){return this.rangeslider.getValues()},videojs.SeekBar.prototype.options_.children.RSTimeBar={},videojs.ControlBar.prototype.options_.children.ControlTimePanel={},videojs.RSTimeBar=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t)}}),videojs.RSTimeBar.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.RSTimeBar.prototype.options_={children:{SeekRSBar:{}}},videojs.RSTimeBar.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-timebar-RS",innerHTML:""})},videojs.SeekRSBar=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("mousedown",this.onMouseDown)}}),videojs.SeekRSBar.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.SeekRSBar.prototype.options_={children:{SelectionBar:{},SelectionBarLeft:{},SelectionBarRight:{},TimePanel:{}}},videojs.SeekRSBar.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-holder"})},videojs.SeekRSBar.prototype.onMouseDown=function(e){e.preventDefault(),videojs.blockTextSelection(),this.rs.options.locked||(videojs.on(document,"mousemove",videojs.bind(this,this.onMouseMove)),videojs.on(document,"mouseup",videojs.bind(this,this.onMouseUp)))},videojs.SeekRSBar.prototype.onMouseUp=function(e){videojs.off(document,"mousemove",this.onMouseMove,!1),videojs.off(document,"mouseup",this.onMouseUp,!1)},videojs.SeekRSBar.prototype.onMouseMove=function(e){var t=this.calculateDistance(e);this.rs.left.pressed?this.setPosition(0,t):this.rs.right.pressed&&this.setPosition(1,t);var i=this.player_.controlBar.currentTimeDisplay.el_;i.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(this.rs._seconds(t),this.player_.duration()),(this.rs.left.pressed||this.rs.right.pressed)&&this.rs._triggerSliderChange()},videojs.SeekRSBar.prototype.setPosition=function(e,t,i){var i="undefined"!=typeof i?i:!0,e=e||0;if(this.rs.options.locked)return!1;if(isNaN(t))return!1;if(0!==e&&1!==e)return!1;var o=this.rs.left.el_,s=(this.rs.right.el_,this.rs[0===e?"left":"right"].el_),n=this.rs.tpr.el_,r=this.rs.tpl.el_,l=this.rs.bar,a=this.rs[0===e?"ctpl":"ctpr"].el_;if(0===e?l.updateLeft(t):l.updateRight(t)){s.style.left=100*t+"%",0===e?l.updateLeft(t):l.updateRight(t),this.rs[0===e?"start":"end"]=this.rs._seconds(t),0===e&&(o.style.zIndex=t>=.9?25:10);var d,h,p,c=videojs.formatTime(this.rs._seconds(t)),u=r.children[0].innerHTML.length;if(p=4>=u?this.player_.isFullScreen?3.25:6.5:5>=u?this.player_.isFullScreen?4:8:this.player_.isFullScreen?5:10,c.length<=4?(d=this.player_.isFullScreen?97:93,h=this.player_.isFullScreen?.1:.5):c.length<=5?(d=this.player_.isFullScreen?96:92,h=this.player_.isFullScreen?.1:.5):(d=this.player_.isFullScreen?95:91,h=this.player_.isFullScreen?.1:.5),0===e?(r.style.left=Math.max(h,Math.min(d,100*t-p/2))+"%",n.style.left.replace("%","")-r.style.left.replace("%","")<=p&&(r.style.left=Math.max(h,Math.min(d,n.style.left.replace("%","")-p))+"%"),r.children[0].innerHTML=c):(n.style.left=Math.max(h,Math.min(d,100*t-p/2))+"%",(n.style.left.replace("%","")||100)-r.style.left.replace("%","")<=p&&(n.style.left=Math.max(h,Math.min(d,r.style.left.replace("%","")-0+p))+"%"),n.children[0].innerHTML=c),i){var v,f,m,y=c.split(":");2==y.length?(v=0,f=y[0],m=y[1]):(v=y[0],f=y[1],m=y[2]),a.children[0].value=v,a.children[1].value=f,a.children[2].value=m}}return!0},videojs.SeekRSBar.prototype.calculateDistance=function(e){var t=this.getRSTBX(),i=this.getRSTBWidth(),o=this.getWidth();return t+=o/2,i-=o,Math.max(0,Math.min(1,(e.pageX-t)/i))},videojs.SeekRSBar.prototype.getRSTBWidth=function(){return this.el_.offsetWidth},videojs.SeekRSBar.prototype.getRSTBX=function(){return videojs.findPosition(this.el_).left},videojs.SeekRSBar.prototype.getWidth=function(){return this.rs.left.el_.offsetWidth},videojs.SelectionBar=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("mouseup",this.onMouseUp),this.fired=!1}}),videojs.SelectionBar.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.SelectionBar.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-selectionbar-RS"})},videojs.SelectionBar.prototype.onMouseUp=function(){var e=this.rs.left.el_.style.left.replace("%",""),t=this.rs.right.el_.style.left.replace("%",""),i=this.player_.duration(),o=this.rs.updatePrecision,s=videojs.round(e*i/100,o),n=videojs.round(t*i/100,o);this.player_.currentTime(s),this.player_.play(),this.rs.bar.activatePlay(s,n)},videojs.SelectionBar.prototype.updateLeft=function(e){var t=""!=this.rs.right.el_.style.left?this.rs.right.el_.style.left:100,i=parseFloat(t)/100,o=videojs.round(i-e,this.rs.updatePrecision);return i+1e-5>=e?(this.rs.bar.el_.style.left=100*e+"%",this.rs.bar.el_.style.width=100*o+"%",!0):!1},videojs.SelectionBar.prototype.updateRight=function(e){var t=""!=this.rs.left.el_.style.left?this.rs.left.el_.style.left:0,i=parseFloat(t)/100,o=videojs.round(e-i,this.rs.updatePrecision);return e+1e-5>=i?(this.rs.bar.el_.style.width=100*o+"%",this.rs.bar.el_.style.left=100*(e-o)+"%",!0):!1},videojs.SelectionBar.prototype.activatePlay=function(e,t){this.timeStart=e,this.timeEnd=t,this.suspendPlay(),this.player_.on("timeupdate",videojs.bind(this,this._processPlay))},videojs.SelectionBar.prototype.suspendPlay=function(){this.fired=!1,this.player_.off("timeupdate",videojs.bind(this,this._processPlay))},videojs.SelectionBar.prototype._processPlay=function(){if(this.player_.currentTime()>=this.timeStart&&(this.timeEnd<0||this.player_.currentTime()<this.timeEnd)){if(this.fired)return;this.fired=!0}else{if(!this.fired)return;this.fired=!1,this.player_.pause(),this.player_.currentTime(this.timeEnd),this.suspendPlay()}},videojs.SelectionBar.prototype.process_loop=function(){var e=this.player;if(e&&this.looping){var t=e.currentTime();(t<this.timeStart||this.timeEnd>0&&this.timeEnd<t)&&e.currentTime(this.timeStart)}},videojs.SelectionBarLeft=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("mousedown",this.onMouseDown),this.pressed=!1}}),videojs.SelectionBarLeft.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.SelectionBarLeft.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-left-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},videojs.SelectionBarLeft.prototype.onMouseDown=function(e){e.preventDefault(),videojs.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,videojs.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),videojs.addClass(this.el_,"active"))},videojs.SelectionBarLeft.prototype.onMouseUp=function(e){videojs.off(document,"mouseup",this.onMouseUp,!1),videojs.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.SelectionBarRight=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("mousedown",this.onMouseDown),this.pressed=!1}}),videojs.SelectionBarRight.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.SelectionBarRight.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-right-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},videojs.SelectionBarRight.prototype.onMouseDown=function(e){e.preventDefault(),videojs.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,videojs.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),videojs.addClass(this.el_,"active"))},videojs.SelectionBarRight.prototype.onMouseUp=function(e){videojs.off(document,"mouseup",this.onMouseUp,!1),videojs.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.TimePanel=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t)}}),videojs.TimePanel.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.TimePanel.prototype.options_={children:{TimePanelLeft:{},TimePanelRight:{}}},videojs.TimePanel.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-timepanel-RS"})},videojs.TimePanelLeft=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t)}}),videojs.TimePanelLeft.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.TimePanelLeft.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-timepanel-left-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.TimePanelRight=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t)}}),videojs.TimePanelRight.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.TimePanelRight.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-timepanel-right-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.ControlTimePanel=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t)}}),videojs.ControlTimePanel.prototype.init_=function(){this.rs=this.player_.rangeslider},videojs.ControlTimePanel.prototype.options_={children:{ControlTimePanelLeft:{},ControlTimePanelRight:{}}},videojs.ControlTimePanel.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-RS vjs-control"})},videojs.ControlTimePanel.prototype.enable=function(e){var e="undefined"!=typeof e?e:!0;this.rs.ctpl.el_.children[0].disabled=e?"":"disabled",this.rs.ctpl.el_.children[1].disabled=e?"":"disabled",this.rs.ctpl.el_.children[2].disabled=e?"":"disabled",this.rs.ctpr.el_.children[0].disabled=e?"":"disabled",this.rs.ctpr.el_.children[1].disabled=e?"":"disabled",this.rs.ctpr.el_.children[2].disabled=e?"":"disabled"},videojs.ControlTimePanelLeft=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}}),videojs.ControlTimePanelLeft.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},videojs.ControlTimePanelLeft.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-left-RS",innerHTML:'开始: <input type="text" id="controltimepanel" maxlength="2" value="00"/>:<input type="text" id="controltimepanel" maxlength="2" value="00"/>:<input type="text" id="controltimepanel" maxlength="2" value="00"/>'})},videojs.ControlTimePanelLeft.prototype.onKeyDown=function(e){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value,this.timeOld[2]=this.el_.children[2].value},videojs.ControlTimePanelLeft.prototype.onKeyUp=function(e){this.rs._checkControlTime(0,this.el_.children,this.timeOld)},videojs.ControlTimePanelRight=videojs.Component.extend({init:function(e,t){videojs.Component.call(this,e,t),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}}),videojs.ControlTimePanelRight.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},videojs.ControlTimePanelRight.prototype.createEl=function(){return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-right-RS",innerHTML:'结束: <input type="text" id="controltimepanel" maxlength="2" value="00"/>:<input type="text" id="controltimepanel" maxlength="2" value="00"/>:<input type="text" id="controltimepanel" maxlength="2" value="00"/>'})},videojs.ControlTimePanelRight.prototype.onKeyDown=function(e){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value,this.timeOld[2]=this.el_.children[2].value},videojs.ControlTimePanelRight.prototype.onKeyUp=function(e){this.rs._checkControlTime(1,this.el_.children,this.timeOld)}}();