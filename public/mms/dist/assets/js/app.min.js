"use strict";function element_lists(){var e=[];return $("#video-clip-merge").children().each(function(){var a=$(this),t=a.attr("data-start"),i=a.attr("data-end");e.push({start:t,end:i})}),e}$(document).ready(function(){var e=new URI(location.href),a=e.search(!0).panel,t={hidden:!1},i=0!==$("#video-display").length?videojs("video-display"):void 0,n=$("#clip-frame"),s=n.parent(),r={horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:1,speed:300,elasticBounds:1,easing:"easeOutExpo",prev:s.find(".clip-prev"),next:s.find(".clip-next")},l=function(){for(var e,a,t,s=i.getValueSlider().start,r=i.getValueSlider().end,l=Math.floor(r)-Math.floor(s),o=videojs.formatTime(s),v=videojs.formatTime(r),m=videojs.formatTime(l),u=i.currentTime(),f=$.map($("#clip-frame li"),function(e){return Number($(e).attr("data-start"))}),g=f.length-1;g>=0;g--){if(!(r<=f[g])){t=g+1;break}if(0===g){t=0;break}}i.currentTime(i.getValueSlider().start).on("seeked",function(){e=$('<canvas width="74" height="48"></canvas>')[0],e.getContext&&e.getContext("2d").drawImage(i.player().el().firstChild,0,0,74,48),$("#clip-frame li").removeClass("active"),a=$("<li/>",{"data-start":s,"data-end":r}).append($("<div/>",{"class":"clip-canvas-wraper"}).append($(e)).append($("<div/>").append($("<button/>",{"class":"add-clip"}).append($("<i/>",{"class":"fa fa-plus"})).on("click",d)).append($("<button/>",{"class":"remove-clip"}).append($("<i/>",{"class":"fa fa-minus"})).on("click",c)))).append($("<div/>",{"class":"clip-info"}).append($("<span/>",{text:o})).append("-").append($("<span/>",{text:v})).append($("<br>")).append($("<span/>",{text:m}))).on("click",p)[0],n.sly("add",a,t),n.sly("activate",a),i.currentTime(u).off("seeked"),i.setValueSlider(r,r+10)})},d=function(){var e=$(this).closest("li"),a=e.attr("data-start"),t=e.attr("data-end"),i=Math.floor(t)-Math.floor(a),n=videojs.formatTime(a),s=videojs.formatTime(t),r=videojs.formatTime(i),l=$('<canvas width="74" height="48"></canvas>')[0];l.getContext&&l.getContext("2d").drawImage(e.find("canvas")[0],0,0,74,48),$("#video-clip-merge .active").removeClass("active"),$("<div/>",{"class":"video-clip-pill active","data-start":a,"data-end":t}).append($("<div/>",{"class":"clip-canvas-wraper"}).append($(l)).append($("<div/>").append($("<button/>",{"class":"remove-clip"}).append($("<i/>",{"class":"fa fa-minus"})).on("click",o)))).append($("<div/>",{"class":"clip-info"}).append($("<span/>",{text:n})).append("-").append($("<span/>",{text:s})).append($("<br>")).append($("<span/>",{text:r}))).on("click",p).appendTo($("#video-clip-merge")),event.stopPropagation()},c=function(){{var e=$(this).closest("li"),a=e.attr("data-start");e.attr("data-end")}$("#video-clip-merge").children('[data-start="'+a+'"]').remove(),n.sly("remove",e),event.stopPropagation()},o=function(){var e=$(this).closest(".video-clip-pill");e.remove(),event.stopPropagation()},p=function(){var e=$(this),a=e.attr("data-start"),t=e.attr("data-end");i.setValueSlider(a,t),i.pause(),i.currentTime(a),$("#clip-frame li").removeClass("active"),$("#video-clip-merge .active").removeClass("active"),e.addClass("active"),event.stopPropagation()};$(".select2-single").select2({minimumResultsForSearch:10}),$(".select2-single-fw").select2({width:"100%",minimumResultsForSearch:10}),$(".select2-multiple").select2({maximumSelectionLength:3,minimumResultsForSearch:10}),$(".select2-multiple-fw").select2({maximumSelectionLength:3,width:"100%",minimumResultsForSearch:10}),n.sly(r),i&&i.rangeslider(t),""!==a&&void 0!==a&&($(".nav-secondary li").removeClass("is-current"),$(".nav-secondary li").find('a[href="?panel='+a+'"]').parent().addClass("is-current"),$(".panel").removeClass("is-current"),$("#"+a).addClass("is-current")),$("#user-name").on("click",function(e){$("#user-dropdown").toggle(),e.preventDefault()}),$(document).on("click",function(e){$("#user-dropdown").is(":visible")&&0===$(e.target).siblings("#user-name").length&&"user-name"!==$(e.target).attr("id")&&$("#user-dropdown").hide()}),$("#btn-add-clip").on("click",function(){l.call(this)}),$(".btn-show-panel").on("click",function(){var e=$(event.target).attr("data-panel");$(".panel").hide(),$("#"+e).show()})});